{"_id":"v9NuSf56QxM5vOxF","name":"Modify alignment points","permission":{"default":0},"type":"script","sort":100001,"flags":{},"scope":"global","command":"let d = new Dialog({\n  title: 'Modify actor alignment',\n  content: `<h2>How much should you modify?</h2><form><label>Quantity<input name=\"value\" type=\"number\" placeholder=\"5\" /></label></form>`,\n  buttons: {\n      no: {\n          icon: '<i class=\"fas fa-ban\"></i>',\n          label: 'Cancel'\n      },\n      yes: {\n          icon: '<i class=\"fas fa-thumbs-up\"></i>',\n          label: 'Modify',\n          callback: (html) => {\n              main(html);\n          }\n      },\n  },\n  default: 'no',\n}).render(true);\n\nasync function main(html) {\n  const value = Number(html.find(\"form\").find('[name=\"value\"]').val());\n\n  if (!value) {\n    return;\n  }\n\n  for (let token of canvas.tokens.controlled) {\n    const newAlignment = game.sw5efoundry.domain.Alignment.computeAlignment({\n      original: token.actor.data.data.details.forceAlignment.value,\n      modifier: value\n    });\n\n    await token.actor.updateAlignment(newAlignment);\n  }\n}","author":"e7TQvuAZ89BXn8Uz","img":"icons/svg/dice-target.svg","actorIds":[]}
{"_id":"Y6EPLMU4QV4i0YxH","name":"Give inspiration","permission":{"default":0},"type":"script","sort":100001,"flags":{},"scope":"global","command":"if (game.user.isGM && canvas.tokens.controlled.length > 0) {\nlet d = new Dialog({\n  title: 'Give inspiration',\n  content: `<h2>Are you sure you want to give inspiration?</h2>`,\n  buttons: {\n      no: {\n          icon: '<i class=\"fas fa-ban\"></i>',\n          label: 'Cancel'\n      },\n      yes: {\n          icon: '<i class=\"fas fa-thumbs-up\"></i>',\n          label: 'Go ahead',\n          callback: (html) => {\n              main(html);\n          }\n      },\n  },\n  default: 'yes',\n}).render(true);\n\nasync function main(html) {\n    await token.actor.update({ 'data.attributes.inspiration': true });\n\nconst getTokenNames = () => canvas.tokens.controlled.reduce((acc, curr) => `${acc}${acc ? ', ' : ''}${curr.actor.name}`, '');\n  \nvar chatData = {\n    user: game.user._id,\n    speaker: ChatMessage.getSpeaker(),\n    content: `${getTokenNames()} ha${canvas.tokens.controlled.length > 1 ? 've' : 's'} been awarded inspiration`};\n\nChatMessage.create(chatData, {});\n}\n}","author":"e7TQvuAZ89BXn8Uz","img":"icons/svg/dice-target.svg","actorIds":[]}
